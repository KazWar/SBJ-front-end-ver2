@using RMS.Web.Areas.App.Models.Common.Modals
@using RMS.Web.Areas.App.Models.Promos
@using RMS.Web.Areas.App.Startup
@model PromoViewModel
@{
    ViewBag.CurrentPageName = AppPageNames.Common.Promos;
}
@section Scripts
{
    <script abp-src="/view-resources/Areas/App/Views/Promos/ViewPromo.js" asp-append-version="true"></script>
}
<div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor">
    <div class="kt-subheader kt-grid__item">
        <div class="@(await GetContainerClass())">
            <div class="kt-subheader__main">
                <h3 class="kt-subheader__title">
                    <span>@L("ViewPromo")</span>
                </h3>
            </div>
        </div>
    </div>
    <div class="@(await GetContainerClass()) kt-grid__item kt-grid__item--fluid">
        <div class="kt-portlet">
            <div class="kt-portlet__body">
                <div id="PromoInformationsTab">
                    <div class="row">
                        <div class="col-6 mb-3">
                            <h6>@L("Promocode"):</h6>
                            @(!string.IsNullOrEmpty(Model.Promo.Promocode) ? Model.Promo.Promocode : L("N/A"))
                        </div>
                        <div class="col-6 mb-3">
                            <h6>@L("PromoScope"):</h6>
                            @(!string.IsNullOrEmpty(Model.PromoScopeDescription) ? Model.PromoScopeDescription : L("N/A"))
                        </div>
                        <div class="col-12 mb-3">
                            <h5>@L("Countries"):</h5>
                            @if (Model.PromoCountries.Any())
                            {
                                <table class="table table-striped table-hover dt-responsive table__view-countries">
                                    <thead>
                                        <tr>
                                            @*<th>@L("ID")</th>
                                            <th>@L("CountryID")</th>*@
                                            <th>@L("CountryCode")</th>
                                            <th>@L("CountryName")</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var promoCountry in Model.PromoCountries)
                                        {
                                            <tr class="table__row-promo-country">
                                                @*<td>@promoCountry.Id</td>
                                                <td>@promoCountry.CountryId</td>*@
                                                <td>@promoCountry.CountryCode</td>
                                                <td>@promoCountry.CountryName</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                            else
                            {
                                <span>@L("N/A")</span>
                            }
                        </div>
                        <div class="col-6 mb-3">
                            <h6>@L("CampaignType"):</h6>
                            @(!string.IsNullOrEmpty(Model.CampaignTypeName) ? Model.CampaignTypeName : L("N/A"))
                        </div>
                        <div class="col-6 mb-3">
                            <h6>@L("Description"):</h6>
                            @(!string.IsNullOrEmpty(Model.Promo.Description) ? Model.Promo.Description : L("N/A"))
                        </div>
                        <div class="col-6 mb-3">
                            <h6>@L("PromoStart"):</h6>
                            @Model.Promo.PromoStart
                        </div>
                        <div class="col-6 mb-3">
                            <h6>@L("PromoEnd"):</h6>
                            @Model.Promo.PromoEnd
                        </div>
                        <div class="col-6 mb-3">
                            <h6>@L("CloseDate"):</h6>
                            @Model.Promo.CloseDate
                        </div>
                        <div class="col-12 mb-3">
                            <h5>@L("Retailers"):</h5>

                            @if (Model.PromoRetailers.Any())
                            {
                                <table class="table table-striped table-hover table__view-retailers">
                                    <thead>
                                        <tr>
                                            @*<th>@L("ID")</th>
                                            <th>@L("RetailerID")</th>*@
                                            <th>@L("RetailerCode")</th>
                                            <th>@L("RetailerName")</th>
                                            <th>@L("RetailerCountry")</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var promoRetailer in Model.PromoRetailers)
                                        {
                                            <tr class="table__row-promo-retailer">
                                                @*<td>@promoRetailer.Id</td>
                                                <td>@promoRetailer.RetailerId</td>*@
                                                <td>@promoRetailer.RetailerCode</td>
                                                <td>@promoRetailer.RetailerName</td>
                                                <td>@promoRetailer.RetailerCountry</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                            else
                            {
                                <span>@L("N/A")</span>
                            }
                        </div>
                        <div class="col-6 mb-3">
                            <h6>@L("ProductCategory"):</h6>
                            @(!string.IsNullOrEmpty(Model.ProductCategoryDescription) ? Model.ProductCategoryDescription : "N/A")
                        </div>
                        <div class="col-12 mb-3">
                            <h5>@L("Products"):</h5>
                            @if (Model.PromoProducts.Any())
                            {
                                <table class="table table-striped table-hover table__view-products">
                                    <thead>
                                        <tr>
                                            @*<th>@L("Id")</th>
                                            <th>@L("ProductID")</th>*@
                                            <th>@L("EAN")</th>
                                            <th>@L("CTN")</th>
                                            <th>@L("Description")</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var promoProduct in Model.PromoProducts)
                                        {
                                            <tr class="table__row-promo-product">
                                                @*<td>@promoProduct.Id</td>
                                                <td>@promoProduct.ProductId</td>*@
                                                <td>@promoProduct.EanCode</td>
                                                <td>@promoProduct.CtnCode</td>
                                                <td>@promoProduct.Description</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                            else
                            {
                                <span>@L("N/A")</span>
                            }
                        </div>
                        <div class="col-6 mb-3">
                            <h6>@L("CustomerCode"):</h6>
                            @(!string.IsNullOrEmpty(Model.Promo.CustomerCode) ? Model.Promo.CustomerCode : L("N/A"))
                        </div>
                        <div class="col-6 mb-3">
                            <h6>@L("Comments"):</h6>
                            @(!string.IsNullOrEmpty(Model.Promo.Comments) ? Model.Promo.Comments : L("N/A"))
                        </div>
                        <div class="col-12 mb-3">
                            <h5>@L("PromoSteps")</h5>
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>@L("Nr")</th>
                                        <th>@L("PromoStepAndFields")</th>
                                        <th>@L("Status")</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var promoStep in Model.PromoSteps)
                                    {
                                        <tr>
                                            <td>@promoStep.Sequence&#46;</td>
                                            <td>
                                                @promoStep.Description
                                                <ul class="listing__promp-step-field" style="padding-left:2rem;list-style:none;">
                                                    @foreach (var promoStepField in promoStep.PromoStepFields)
                                                    {
                                                        <li>@promoStepField.FieldName: <span class="highlight-color" style="color:#1000ff;cursor:pointer;">@promoStepField.FieldValue</span></li>
                                                    }
                                                </ul>
                                            </td>
                                            <td>@promoStep.Status</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="kt-portlet__foot">
                <div class="row align-items-center">
                    <div class="col-md-12 kt-align-right">
                        <button id="CancelButton" type="button" class="btn btn-secondary close-button">@L("Cancel")</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
